<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./src/output.css" />
    <link rel="stylesheet" href="./src/style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.css" />
    <title>Detail Paket Wisata | Visit Nusa</title>

    <style></style>
  </head>
  <div class="flex-col">
    <!-- Main Booking Section -->
    <div class="bg-secondary rounded-2xl p-6 w-full max-w-4xl shadow-xl">
      <h2 class="text-white text-lg font-semibold mb-4">Select participants and date</h2>

      <!-- Booking Form -->
      <div class="flex flex-col gap-3">
        <!-- Input Row: Adults, Children, Date -->
        <div class="flex flex-col md:flex-row gap-3">
          <!-- Adults Counter -->
          <div class="bg-white rounded-xl p-3 flex items-center justify-between min-h-[60px] flex-1">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 25" fill="none">
                <g clip-path="url(#clip0_adults)">
                  <path
                    d="M15 19.628C15.853 19.8757 16.7368 20.0009 17.625 20C19.0534 20.0021 20.4633 19.6764 21.746 19.048C21.7839 18.1517 21.5286 17.2675 21.0188 16.5293C20.509 15.7912 19.7724 15.2394 18.9207 14.9575C18.0691 14.6757 17.1487 14.6791 16.2992 14.9674C15.4497 15.2557 14.7173 15.813 14.213 16.555M15 19.628V19.625C15 18.512 14.714 17.465 14.213 16.555M15 19.628V19.734C13.0755 20.8931 10.8706 21.5038 8.62402 21.5C6.29302 21.5 4.11202 20.855 2.25002 19.734L2.24902 19.625C2.24826 18.2095 2.71864 16.8339 3.58601 15.7153C4.45338 14.5966 5.6684 13.7984 7.03951 13.4466C8.41063 13.0948 9.85985 13.2093 11.1587 13.7721C12.4575 14.3349 13.5321 15.314 14.213 16.555M12 6.875C12 7.77011 11.6444 8.62855 11.0115 9.26149C10.3786 9.89442 9.52013 10.25 8.62502 10.25C7.72992 10.25 6.87147 9.89442 6.23854 9.26149C5.6056 8.62855 5.25002 7.77011 5.25002 6.875C5.25002 5.97989 5.6056 5.12145 6.23854 4.48851C6.87147 3.85558 7.72992 3.5 8.62502 3.5C9.52013 3.5 10.3786 3.85558 11.0115 4.48851C11.6444 5.12145 12 5.97989 12 6.875ZM20.25 9.125C20.25 9.82119 19.9735 10.4889 19.4812 10.9812C18.9889 11.4734 18.3212 11.75 17.625 11.75C16.9288 11.75 16.2612 11.4734 15.7689 10.9812C15.2766 10.4889 15 9.82119 15 9.125C15 8.42881 15.2766 7.76113 15.7689 7.26884C16.2612 6.77656 16.9288 6.5 17.625 6.5C18.3212 6.5 18.9889 6.77656 19.4812 7.26884C19.9735 7.76113 20.25 8.42881 20.25 9.125Z"
                    stroke="#4B5563"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                </g>
                <defs>
                  <clipPath id="clip0_adults">
                    <rect width="24" height="24" fill="white" transform="translate(0 0.5)" />
                  </clipPath>
                </defs>
              </svg>
              <span class="font-medium text-secondary text-sm">Adults</span>
            </div>
            <div class="flex items-center gap-2">
              <button onclick="decreaseCount('adults')" class="w-6 h-6 rounded-full border border-secondary-300 flex items-center justify-center hover:bg-gray-50 transition-colors">
                <svg class="w-3 h-3 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                </svg>
              </button>
              <span id="adultsCount" class="font-semibold text-sm text-secondary w-4 text-center">0</span>
              <button onclick="increaseCount('adults')" class="w-6 h-6 rounded-full border border-secondary-300 flex items-center justify-center hover:bg-gray-50 transition-colors">
                <svg class="w-3 h-3 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Children Counter -->
          <div class="bg-white rounded-xl p-3 flex items-center justify-between min-h-[60px] flex-1">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#4B5563" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z" />
                <path d="M16 18v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2h8c1.1 0 2 .9 2 2z" />
                <path d="M18 8a3 3 0 1 1 0 6" />
                <path d="M22 18v2a2 2 0 0 1-2 2h-1" />
              </svg>
              <span class="font-medium text-secondary text-sm">Children</span>
            </div>
            <div class="flex items-center gap-2">
              <button onclick="decreaseCount('children')" class="w-6 h-6 rounded-full border border-secondary-300 flex items-center justify-center hover:bg-gray-50 transition-colors">
                <svg class="w-3 h-3 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                </svg>
              </button>
              <span id="childrenCount" class="font-semibold text-sm text-secondary w-4 text-center">0</span>
              <button onclick="increaseCount('children')" class="w-6 h-6 rounded-full border border-secondary-300 flex items-center justify-center hover:bg-gray-50 transition-colors">
                <svg class="w-3 h-3 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Date Selector -->
          <div class="bg-white rounded-xl p-3 min-h-[60px] flex items-center flex-1">
            <div class="flex items-center gap-2 flex-1 relative">
              <svg class="w-5 h-5 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
              <input type="text" id="dateInput" placeholder="Select date" class="flex-1 border-0 outline-none text-sm font-medium text-secondary bg-transparent cursor-pointer pr-8" readonly />
              <svg class="w-4 h-4 text-secondary absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </div>
          </div>
        </div>

        <!-- Button Row: Check Availability -->
        <div class="mt-3">
          <button onclick="checkAvailability()" class="bg-primary text-secondary font-semibold py-3 px-4 rounded-xl transition-all duration-300 hover:bg-yellow-500 text-sm w-full min-h-[60px]">Check Availability</button>
        </div>
      </div>

      <!-- Total Price Display (Mobile) -->
      <div id="totalPriceMobile" class="mt-4 bg-white rounded-xl p-3 hidden md:hidden">
        <div class="flex justify-between items-center">
          <div>
            <div class="text-sm text-secondary">Total for <span id="totalPeopleMobile">2</span> people</div>
          </div>
          <div class="text-lg font-bold text-secondary" id="priceAmountMobile">Rp 0</div>
        </div>
      </div>
    </div>

    <!-- Availability Result Section -->
    <div id="availabilityResult" class="mt-6 w-full max-w-4xl mx-auto hidden">
      <div class="bg-white rounded-2xl border-2 border-yellow-300 shadow-lg overflow-hidden">
        <!-- Tour Header -->
        <div class="p-4 border-b">
          <div class="flex justify-between items-start">
            <h3 class="text-lg font-semibold text-secondary mb-2">Day Tour with Guides at Temple and Hotel Pickup</h3>
            <button onclick="toggleDetails()" class="p-2 text-secondary hover:bg-gray-100 rounded-full transition-colors">
              <svg id="toggleIcon" class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
          </div>
          <p class="text-sm text-gray-600 mb-3">
            This option sharing tour includes all prambanan and borobudur guides, excluding temple tickets IDR 950,000 per person cash only, the driver will take care of all your tickets, The driver will collect your ticket money during the
            trip
          </p>

          <!-- Tour Details -->
          <div class="flex flex-wrap gap-4 text-sm">
            <div class="flex items-center gap-2">
              <svg class="w-4 h-4 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="text-secondary">11 hours</span>
            </div>
            <div class="flex items-center gap-2">
              <svg class="w-4 h-4 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
              <span class="text-secondary">Guide: English</span>
            </div>
          </div>

          <!-- Pickup Location -->
          <div class="mt-3">
            <button class="text-secondary underline text-sm flex items-center gap-1 hover:text-gray-800 transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              View pickup area
            </button>
            <p class="text-xs text-gray-500 mt-1">Check to see if your accommodation is within the eligible area for pickup.</p>
          </div>
        </div>

        <!-- Expandable Details Section -->
        <div id="detailsSection" class="hidden">
          <div class="p-4 bg-gray-50">
            <h4 class="font-semibold text-secondary mb-3">Starting time</h4>
            <div class="mb-2">
              <div class="text-secondary" id="selectedDateDisplay">Wednesday, August 20, 2025</div>
              <div class="text-secondary font-semibold">8:00 AM</div>
            </div>
            <div class="text-sm text-gray-600 flex items-center gap-2 mb-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Only 18 hour left to book
            </div>
            <div class="text-sm text-gray-600 flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Cancel before 8:00 AM on August 20 for a full refund
            </div>
          </div>
        </div>

        <!-- Price and Continue Section -->
        <div class="bg-secondary p-4 flex flex-col md:flex-row justify-between items-center gap-3">
          <div class="text-left">
            <div class="text-primary text-2xl font-bold" id="finalPrice">$4792</div>
            <div class="text-white text-sm" id="participantCount">1 adult</div>
            <div class="text-gray-300 text-xs">All taxes and fees included</div>
          </div>
          <button onclick="continuePurchase()" class="bg-primary text-secondary font-semibold px-8 py-3 rounded-xl transition-all duration-300 hover:bg-yellow-500 text-sm min-w-[120px]">Continue</button>
        </div>
      </div>
    </div>

    <!-- Flatpickr JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.13/flatpickr.min.js"></script>

    <script>
      // App State
      const state = {
        adultsCount: 0,
        childrenCount: 0,
        selectedDate: null,
        priceData: {
          weekday: 250000,
          weekend: 350000,
          holiday: 450000,
        },
      };

      // Initialize Flatpickr
      const fp = flatpickr("#dateInput", {
        minDate: "today",
        dateFormat: "d F Y",
        locale: {
          firstDayOfWeek: 1,
        },
        onChange: function (selectedDates, dateStr, instance) {
          if (selectedDates.length > 0) {
            state.selectedDate = selectedDates[0];
            updateTotalPrice();
          }
        },
        onDayCreate: function (dObj, dStr, fp, dayElem) {
          const date = dayElem.dateObj;
          if (date >= new Date().setHours(0, 0, 0, 0)) {
            const dayType = getDayType(date);
            const price = state.priceData[dayType];
            const priceEl = document.createElement("div");
            priceEl.className = "text-xs font-bold text-orange-600 mt-1";
            priceEl.textContent = `${price / 1000}k`;
            dayElem.appendChild(priceEl);
          }
        },
      });

      // Counter Functions
      function increaseCount(type) {
        if (type === "adults") {
          state.adultsCount++;
          document.getElementById("adultsCount").textContent = state.adultsCount;
        } else if (type === "children") {
          state.childrenCount++;
          document.getElementById("childrenCount").textContent = state.childrenCount;
        }
        updateTotalPrice();
      }

      function decreaseCount(type) {
        if (type === "adults" && state.adultsCount > 1) {
          state.adultsCount--;
          document.getElementById("adultsCount").textContent = state.adultsCount;
        } else if (type === "children" && state.childrenCount > 0) {
          state.childrenCount--;
          document.getElementById("childrenCount").textContent = state.childrenCount;
        }
        updateTotalPrice();
      }

      // Utility Functions
      function getDayType(date) {
        const day = date.getDay();
        const holidays = ["2024-12-25", "2025-01-01", "2025-08-17"];
        const dateString = date.toISOString().split("T")[0];

        if (holidays.includes(dateString)) {
          return "holiday";
        } else if (day === 0 || day === 6) {
          return "weekend";
        } else {
          return "weekday";
        }
      }

      function formatPrice(price) {
        return `Rp ${price.toLocaleString("id-ID")}`;
      }

      function formatPriceUSD(price) {
        // Convert IDR to USD (approximate rate 1 USD = 15000 IDR)
        const usdPrice = Math.round(price / 15000);
        return `$${usdPrice}`;
      }

      function updatePriceDisplay() {
        if (state.selectedDate) {
          const dayType = getDayType(state.selectedDate);
          const price = state.priceData[dayType];
          document.getElementById("selectedPrice").textContent = formatPrice(price);
          document.getElementById("selectedPrice").classList.remove("hidden");
        } else {
          document.getElementById("selectedPrice").classList.add("hidden");
        }
      }

      function updateTotalPrice() {
        const totalPeople = state.adultsCount + state.childrenCount;

        if (document.getElementById("totalPeople")) {
          document.getElementById("totalPeople").textContent = totalPeople;
        }
        document.getElementById("totalPeopleMobile").textContent = totalPeople;

        if (state.selectedDate) {
          const dayType = getDayType(state.selectedDate);
          const basePrice = state.priceData[dayType];
          const totalPrice = state.adultsCount * basePrice + state.childrenCount * basePrice * 0.7;

          if (document.getElementById("priceAmount")) {
            document.getElementById("priceAmount").textContent = formatPrice(totalPrice);
          }
          document.getElementById("priceAmountMobile").textContent = formatPrice(totalPrice);
        }
      }

      function checkAvailability() {
        if (state.adultsCount < 1) {
          alert("Minimal 1 adult harus dipilih!");
          return;
        }
        if (!state.selectedDate) {
          alert("Please select a date first!");
          return;
        }

        const dayType = getDayType(state.selectedDate);
        const basePrice = state.priceData[dayType];
        const totalPrice = state.adultsCount * basePrice + state.childrenCount * basePrice * 0.7;

        // Update availability result display
        updateAvailabilityDisplay(totalPrice);

        // Show availability result with animation
        const resultElement = document.getElementById("availabilityResult");
        resultElement.classList.remove("hidden");
        resultElement.classList.add("slide-up", "bounce-in");

        // Scroll to result smoothly
        setTimeout(() => {
          resultElement.scrollIntoView({
            behavior: "smooth",
            block: "nearest",
          });
        }, 100);
      }

      function updateAvailabilityDisplay(totalPrice) {
        // Update selected date display
        const options = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
        const formattedDate = state.selectedDate.toLocaleDateString("en-US", options);
        document.getElementById("selectedDateDisplay").textContent = formattedDate;

        // Update price display
        document.getElementById("finalPrice").textContent = formatPriceUSD(totalPrice);

        // Update participant count
        let participantText = "";
        if (state.adultsCount > 0) {
          participantText += `${state.adultsCount} adult${state.adultsCount > 1 ? "s" : ""}`;
        }
        if (state.childrenCount > 0) {
          if (participantText) participantText += ", ";
          participantText += `${state.childrenCount} child${state.childrenCount > 1 ? "ren" : ""}`;
        }
        document.getElementById("participantCount").textContent = participantText;
      }

      function toggleDetails() {
        const detailsSection = document.getElementById("detailsSection");
        const toggleIcon = document.getElementById("toggleIcon");

        if (detailsSection.classList.contains("hidden")) {
          detailsSection.classList.remove("hidden");
          detailsSection.classList.add("slide-up");
          toggleIcon.classList.add("rotate-180");
        } else {
          detailsSection.classList.add("slide-down");
          toggleIcon.classList.remove("rotate-180");
          setTimeout(() => {
            detailsSection.classList.add("hidden");
            detailsSection.classList.remove("slide-down");
          }, 300);
        }
      }

      function continuePurchase() {
        const dayType = getDayType(state.selectedDate);
        const basePrice = state.priceData[dayType];
        const totalPrice = state.adultsCount * basePrice + state.childrenCount * basePrice * 0.7;

        const options = { year: "numeric", month: "long", day: "numeric" };
        const formattedDate = state.selectedDate.toLocaleDateString("id-ID", options);

        alert(`Proceeding to payment...
        
                  Date: ${formattedDate}
                  Adults: ${state.adultsCount}
                  Children: ${state.childrenCount}
                  Total Price: ${formatPrice(totalPrice)}

                  Thank you for your booking!`);
      }

      // Initialize
      updateTotalPrice();
    </script>
  </div>
</html>
